<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Assignment 2</title>
  </head>
  <body>
    <p id="pluralized"></p>

    <script>
    //Task 1 String Object
    var string = {
      id: 5,
      pluralize: function(x) {
        console.log(x);
        if (x.slice(-1) == 'y') {
          var str = x;
          str = str.slice(0, -1);
          str += "ies"
          return str;
        } else {
          return x;
        }
      }
    }
      var a = string.pluralize('baby'); // returns babies
      var b = string.pluralize('cat'); // returns cats

      //Task 2 Book and ShoppingCart constructor functions

      function Book({title, quantity, price}) {
        this.title = title;
        this.quantity = quantity;
        this.price = price;
      }

      Book.prototype.getSubtotal = function() {
        return this.quantity * this.price
      };

      var oojsBook = new Book({ title: 'Object Oriented JavaScript', quantity: 2, price: 10 });
      console.log(oojsBook.title); // Object Oriented JavaScript
      console.log(oojsBook.quantity); // 2
      console.log(oojsBook.price); // 10
      console.log(oojsBook.getSubtotal()); // 20

      function ShoppingCart(items) {
        this.items = items;
      }

      ShoppingCart.prototype.add = function(book) {
        this.items.push(book);
      };

      ShoppingCart.prototype.getTotal = function() {
        var total = this.items.reduce(function(list, item) {
          return list + item.getSubtotal();
        }, 0)
          return total;
      };

      var book1 = new Book({ title: 'Object Oriented JavaScript', quantity: 1, price: 10 });
      var book2 = new Book({ title: 'JavaScript Web Applications', quantity: 2, price: 15 });
      var book3 = new Book({ title: 'PHP Object Oriented Solutions', quantity: 1, price: 20 });
      var book4 = new Book({ title: 'Head First Java', quantity: 5, price: 20 });

      var cart = new ShoppingCart([book1, book2]);
        cart.add(book3);
        cart.add(book4);

      var subtotal = cart.getTotal();
      console.log(subtotal); // 160

      //Task 3 Implementing Array.prototype.map2()
      Array.prototype.map2 = function(callbackFunc) {
        var manArray = [];
          for(var i = 0; i < this.length; i++) {
            manArray.push(callbackFunc(this[i]));
          }
        return manArray;
        };

      var numbers = [1, 2, 3, 4, 5];
      var numbersDoubled = numbers.map2(function(number) {
        return number * 2;
      });
      console.log(numbersDoubled); // should equal [2, 4, 6, 8, 10]

    </script>
  </body>
</html>
